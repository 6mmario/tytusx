<!DOCTYPE html>
<html>

<head>
    <title>TYTUSX</title>
    <link rel="stylesheet" type="text/css" href="./estilos.css">
    <link rel="shortcut icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/b7c4564f91.js" crossorigin="anonymous"></script>
</head>

<body>

    <h1 class="titulo">TYTUSX</h1>
    <h1 class="hh1">
        <button class="fas fa-folder-open" type="file" value="text">
            <input type="file" id="file" value="text" />
        </button>
    </h1>
    <h1 class="hh2"><!--BOTON GUARDAR-->
        <button class="boton" onclick="Guardar()">
            <i class="fas fa-save"></i>
        </button>
    </h1>
    <h1 class="hh3"><!--BOTON LIMPIAR-->
        <button class="boton" onclick="Limpiar()">
            <i class="far fa-file"></i>
        </button>
    </h1>
    <h1 class="hh4"><!--BOTON REPORTES-->
        <button class="boton" onclick="traducir()">
            <i class="fas fa-file-pdf"></i>
        </button>
    </h1>
    <h1 class="hh5"><!--BOTON COMPILAR DESCENDENTE-->
        <button class="botoncito">
            <i class="fas fa-play"></i>
            <i class="fas fa-arrow-down"></i>
        </button>
    </h1>
    <h1 class="hh6"><!--BOTON COMPILAR ASCENDENTE-->
        <button class="botoncito">
            <i class="fas fa-play"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
    </h1>
    <h1 class="hh7"><!--BOTON AST DESCENDENTE-->
        <button class="botoncito">
            <i class="fas fa-font"></i>
            <i class="fas fa-arrow-down"></i>
        </button>
    </h1>
    <h1 class="hh8"><!--BOTON AST ASCENDENTE-->
        <button class="botoncito">
            <i class="fas fa-font"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
    </h1>
    <h1 class="hh9"><!--BOTON CST DESCENDENTE-->
        <button class="botoncito">
            <i class="fas fa-tree"></i>
            <i class="fas fa-arrow-down"></i>
        </button>
    </h1>
    <h1 class="hh0"><!--BOTON CST ASCENDNETE-->
        <button class="botoncito">
            <i class="fas fa-tree"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
    </h1>
    <textarea class="txt1" name="texto" id="txtxml"
        style="width:650px;height:700px"><!--INGRESE SU ARCHIVO EN FORMATO XML--></textarea>
    <textarea class="txt2" name="texto" id="txtconsola" style="width:650px;height:700px">--RESULTADOS--</textarea>
    <textarea class="txt3" name="texto" id="txtxpath"
        style="width:1320px;height:30px">INGRESE SU CONSULTA EN FORMATO XPATH</textarea>

    <script type="text/javascript">
        const input = document.getElementById('file');
        const editor = document.getElementById('txtxml');
        const editor1 = document.getElementById('txtxpath');
        input.addEventListener('change', function () {
            if (input.files.length > 0) {
                readFile(input.files[0]);
            }
        });
        function readFile(file) {
            const reader = new FileReader();
            reader.onload = function () {
                if (editor.value === "<!--INGRESE SU ARCHIVO EN FORMATO XML-->") {
                    editor.value = reader.result;
                } else {
                    editor1.value = reader.result;
                }

            }
            reader.readAsText(file);
        }
    </script>

    <script>
        function Guardar() {
            var textToWrite = document.getElementById("txtxml").value;
            var textFileAsBlob = new Blob([textToWrite], { type: 'text/java' });
            var fileNameToSaveAs = "Entrada.java";
            var downloadLink = document.createElement("a");
            downloadLink.download = fileNameToSaveAs;
            downloadLink.innerHTML = "My Hidden Link";
            window.URL = window.URL || window.webkitURL;
            downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
            downloadLink.onclick = Eliminar;
            downloadLink.style.display = "none";
            document.body.appendChild(downloadLink);
            downloadLink.click();
        }

        function Eliminar(event) {
            // remove the link from the DOM
            document.body.removeChild(event.target);
        }

    </script>

    <script>
        function Limpiar() {
            document.getElementById("txtxml").value = "";
            document.getElementById("txtxml").value = "<!--INGRESE SU ARCHIVO EN FORMATO XML-->";
            document.getElementById("txtxpath").value = "";
            document.getElementById("txtxpath").value = "INGRESE SU CONSULTA EN FORMATO XPATH";
            document.getElementById("txtconsola").value = "";
            document.getElementById("txtconsola").value = "--RESULTADOS--";
        }
    </script>

    <script>
        function traducir(){
            var txt = document.getElementById("txtxml").value;
            var txtra = utf8_decode(txt);
            document.getElementById("txtxpath").value = txtra;
        }
    </script>

    <script type="text/javascript">
        function utf8_decode (strData) { // eslint-disable-line camelcase
 
        const tmpArr = []
        let i = 0
        let c1 = 0
        let seqlen = 0
        strData += ''
        while (i < strData.length) {
            c1 = strData.charCodeAt(i) & 0xFF
            seqlen = 0
            if (c1 <= 0xBF) {
            c1 = (c1 & 0x7F)
            seqlen = 1
            } else if (c1 <= 0xDF) {
            c1 = (c1 & 0x1F)
            seqlen = 2
            } else if (c1 <= 0xEF) {
            c1 = (c1 & 0x0F)
            seqlen = 3
            } else {
            c1 = (c1 & 0x07)
            seqlen = 4
            }
            for (let ai = 1; ai < seqlen; ++ai) {
            c1 = ((c1 << 0x06) | (strData.charCodeAt(ai + i) & 0x3F))
            }
            if (seqlen === 4) {
            c1 -= 0x10000
            tmpArr.push(String.fromCharCode(0xD800 | ((c1 >> 10) & 0x3FF)))
            tmpArr.push(String.fromCharCode(0xDC00 | (c1 & 0x3FF)))
            } else {
            tmpArr.push(String.fromCharCode(c1))
            }
            i += seqlen
        }
        return tmpArr.join('')
        }



    </script>
</body>

</html>